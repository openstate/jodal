<!-- title: Articles -->
<!-- subtitle: Politiek Data Dashboard -->
<article id="compare-article">
<h1>Gemeentebegroting 2023</h1>

<P style="text-align: left;">De gemeentebegroting van 2023 is aanstaande. Via de website van de gemeente kunt u deze begroting inzien zodra deze is behandeld en aangenomen door de gemeenteraad. Ook al lijken de begrotingen van verschillende gemeenten veel op elkaar, iedere gemeente besteedt het totale budget op een ander manier. Dit heeft vooral te maken met de diversiteit van de omgeving en samenleving. Waar de ene gemeente meer aandacht heeft voor orde en veiligheid, reserveert een andere gemeente meer budget voor het realiseren van groen. In dit artikel kunt u de budgetten en belastingen van verschillende gemeenten met elkaar vergelijken.</P>

<H2>Hoe komt een gemeentebegroting tot stand?</H2>

<P style="text-align: left;">Een gemeentebegroting is een financiële prognose bestaande uit lasten(inkomsten) en lasten(uitgaven). Het heeft nogal wat voeten in de aarde voordat deze begroting goedgekeurd wordt. De gemeentebegroting is een raming die verdeeld is onder verschillende domeinen. Officieel mag een gemeente geen winst maken waardoor de lasten en lasten zo goed als gelijk moeten zijn.</O>

<P style="text-align: left;">Het college van burgemeester en wethouders start in het voorjaar met het maken van een kadernota. Ook wel de voorjaarsnota genoemd. Dit doen ze aan de hand van de jaarnota van het afgelopen jaar, de huidige financiele situatie en de door de gemeenteraad aangegeven prioriteiten. In deze conceptbegroting staat in grote lijnen vermeld wat de lasten en lasten ongeveer gaan zijn voor het komende jaar. Deze nota gaat naar de gemeenteraad en vanaf dat moment kan er inhoudelijk gedebatteerd worden over het samenstellen van de begroting.</P>

<P style="text-align: left;">Het kan zijn dat er volledig nieuwe voorstellen gedaan worden en sommige onderdelen zullen behandeld worden als hamerstuk. Van de uitkomst stelt het college van B&W uiteinlijk een begroting op die in het najaar wordt behandeld. Grote veranderigen zijn dan over het algemeen niet meer mogelijk. Wel kunnen er, binnen de afgesproken kaders, kleine bijstellingen worden gedaan.</P>

<H2>Inkomen gemeente vergelijken</H2>

<P style="text-align: left;">Ongeveer 60% van het totale inkomen van de gemeente komt vanuit het Rijk. Er is een aanzienlijk verschil in het bedrag wat verschillende gemeenten ontvangen. Het aantal inwoners, jongeren, senioren en uitkeringsgerechtigden zijn onder andere belangrijke factoren voor het bepalen van dit budget. In dit artikel kunt u de begroting van het jaar 2022 van twee verschillende gemeenten met elkaar vergelijken.</p>

<table>
  <thead>
    <tr>
      <td></td>
      <td class="select-gm-1" style="text-align: right;">
        <form>
          <select id="select-gm-1" name="gm1">
            <option value="-">-</option>
          </select>
        </form>
      </td>
      <td class="select-gm-2" style="text-align: right;">
        <form>
          <select id="select-gm-2" name="gm2">
            <option value="-">-</option>
          </select>
        </form>
      </td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td class="select-gm-1-naam" style="text-align: right;"></td>
      <td class="select-gm-2-naam" style="text-align: right;"></td>
    </tr>
    <tr>
      <td><strong>Totale inkomsten</strong></td>
      <td class="gm-1-baten-totaal" style="text-align: right;"></td>
      <td class="gm-2-baten-totaal" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Het rijk</td>
      <td class="gm-1-baten-0.7" style="text-align: right;"></td>
      <td class="gm-2-baten-0.7" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Veiligheid</td>
      <td class="gm-1-baten-2" style="text-align: right;"></td>
      <td class="gm-2-baten-2" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Verkeer, vervoer en waterstaat</td>
      <td class="gm-1-baten-3" style="text-align: right;"></td>
      <td class="gm-2-baten-3" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Economie</td>
      <td class="gm-1-baten-4" style="text-align: right;"></td>
      <td class="gm-2-lasten-4" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Onderwijs</td>
      <td class="gm-1-baten-5" style="text-align: right;"></td>
      <td class="gm-2-baten-5" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Volksgezondheid en milieu</td>
      <td class="gm-1-baten-8" style="text-align: right;"></td>
      <td class="gm-2-baten-8" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Sport, cultuur en recreatie</td>
      <td class="gm-1-baten-6" style="text-align: right;"></td>
      <td class="gm-2-baten-6" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Sociaal domein</td>
      <td class="gm-1-baten-7" style="text-align: right;"></td>
      <td class="gm-2-baten-7" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Bestuur en ondersteuning</td>
      <td class="gm-1-baten-1" style="text-align: right;"></td>
      <td class="gm-2-baten-1" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Ruimte</td>
      <td class="gm-1-baten-9" style="text-align: right;"></td>
      <td class="gm-2-baten-9" style="text-align: right;"></td>
    </tr>
    <tr>
      <td><br><br><br></td>
      <td class="select-gm-1-naam" style="text-align: right;"></td>
      <td class="select-gm-2-naam" style="text-align: right;"></td>
    </tr>
    <tr>
      <td><strong>Totale uitgaven</strong></td>
      <td class="gm-1-lasten-totaal" style="text-align: right;"></td>
      <td class="gm-2-lasten-totaal" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Het rijk</td>
      <td class="gm-1-lasten-0.7" style="text-align: right;"></td>
      <td class="gm-2-lasten-0.7" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Veiligheid</td>
      <td class="gm-1-lasten-2" style="text-align: right;"></td>
      <td class="gm-2-lasten-2" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Verkeer, vervoer en waterstaat</td>
      <td class="gm-1-lasten-3" style="text-align: right;"></td>
      <td class="gm-2-lasten-3" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Economie</td>
      <td class="gm-1-lasten-4" style="text-align: right;"></td>
      <td class="gm-2-lasten-4" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Onderwijs</td>
      <td class="gm-1-lasten-5" style="text-align: right;"></td>
      <td class="gm-2-lasten-5" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Volksgezondheid en milieu</td>
      <td class="gm-1-lasten-8" style="text-align: right;"></td>
      <td class="gm-2-lasten-8" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Sport, cultuur en recreatie</td>
      <td class="gm-1-lasten-6" style="text-align: right;"></td>
      <td class="gm-2-lasten-6" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Sociaal domein</td>
      <td class="gm-1-lasten-7" style="text-align: right;"></td>
      <td class="gm-2-lasten-7" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Bestuur en ondersteuning</td>
      <td class="gm-1-lasten-1" style="text-align: right;"></td>
      <td class="gm-2-lasten-1" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Ruimte</td>
      <td class="gm-1-lasten-9" style="text-align: right;"></td>
      <td class="gm-2-lasten-9" style="text-align: right;"></td>
    </tr>
  </tbody>
</table>

<P style="text-align: left;">Het college van B&W en de gemeenteraad hebben de taak te letten op de lokale kwesties, de maatschappelijke behoeften en de daarbij behorende prioriteiten.
Omdat men tijdens het opstellen van de gemeentebegroting rekening houdt met al deze factoren blijft het maken van een gemeentebegroting een kwetsbaar proces.</p>
<P style="text-align: left;">
Databron: Openspending.nl<br>
*Dit artikel is SEO geschreven. De nog interactief in te vullen data zal niet worden geïndexeerd door serach engines aangezien dit geen statische data is. Door in het artikel geregeld de eigen gemeentenaam in te voegen zal de indexatie naar de betreffende gemeente leiden.
</p>
</article>

<p>
  <a href="#" id="btn-clipboard-copy" class="btn btn-default">Artikel naar klembord kopie&euml;ren</a>
</p>

<script type="text/javascript">
console.log('articles test!');

// from: https://stackoverflow.com/questions/34191780/javascript-copy-string-to-clipboard-as-text-html
function copyElementToClipboard(element) {
  window.getSelection().removeAllRanges();
  let range = document.createRange();
  range.selectNode(typeof element === 'string' ? document.getElementById(element) : element);
  window.getSelection().addRange(range);
  document.execCommand('copy');
  window.getSelection().removeAllRanges();
}

var gmCompareApp = window.gmCompareApp || {
  gm: {},
  gm_names: [],
  gm_docs: {},
  gm_selected: {}
};
window.gmCompareApp = gmCompareApp;

let dutchCurrency = Intl.NumberFormat('nl-NL');
gmCompareApp.formatCurrency = function(a) {
  return "\u20AC" + ' ' + dutchCurrency.format(a);
};

gmCompareApp.fillData = function(data, year, period, direction, gm_number) {
  var baseSelector = "gm-" + gm_number + '-' + direction +'-';
  var total = 0;
  data.forEach(function (p) {
    if ((p['jaar'] == year) && (p['periode'] == period) && (p['soort'] == direction)) {
      var elems = document.getElementsByClassName(baseSelector + p['code']);
      for (let i = 0; i < elems.length; i++) {
        elems[i].textContent = gmCompareApp.formatCurrency(p['bedrag']);
      }
      if (p['type'] == 'Hoofdfunctie') {
        total += p['bedrag'];
        console.log('Hoofdfunctie found~! total now : ' + total);
      }
    }
  });
  if ((data[0]['jaar'] == year) && (data[0]['periode'] == period)) {
    console.log('Total now ' + total);
    console.log(baseSelector + 'totaal');
    var elems = document.getElementsByClassName(baseSelector + 'totaal');
    elems[0].textContent = gmCompareApp.formatCurrency(total);
  }
};

gmCompareApp.getData = function(fn) {
  fetch('/2022-articles/' + fn).
    then((response) => response.json())
    .then(function (data) {
        console.log('Got data for ' + fn);
        var data_id = data[0]['locatie_code'];
        if (gmCompareApp.gm_selected['select-gm-1'] == data_id) {
          gmCompareApp.fillData(data, 2022, 0, 'baten', 1);
          gmCompareApp.fillData(data, 2022, 0, 'lasten', 1);
        } else {
          gmCompareApp.fillData(data, 2022, 0, 'baten', 2);
          gmCompareApp.fillData(data, 2022, 0, 'lasten', 2);
        }
    });
};

gmCompareApp.handleDropDown = function(e) {
  console.log('select used' + e.target.id);
  var selectedGm = e.target.options[e.target.selectedIndex].value;
  var elems = document.getElementsByClassName(e.target.id + '-naam');
  for (let i = 0; i < elems.length; i++) {
    elems[i].textContent = selectedGm;
  }
  if (selectedGm != '-') {
    var selectedId = gmCompareApp.gm[selectedGm];
    gmCompareApp.gm_selected[e.target.id] = selectedId;
    console.log('Selection was changed!: ' + selectedGm);
    console.log("Should download these now:");
    console.log(gmCompareApp.gm_docs[selectedId]);
    gmCompareApp.gm_docs[selectedId].forEach(function (d) {
      gmCompareApp.getData(d);
    });
  } else {
    console.log('empty selection, should empty i guess');
  }
};

gmCompareApp.initDropDowns = function(q) {
  const selectElement = document.querySelector(q);

  selectElement.addEventListener('change', (event) => {
    gmCompareApp.handleDropDown(event);
  });
};

gmCompareApp.initData = function() {
  fetch('/2022-articles/details.json')
    .then((response) => response.json())
    .then(function(data) {
      //console.log(data);
      data.forEach(function (k) {
        k.forEach(function (i) {
          if ((i.id !== null) && i.id.startsWith("GM")) {
            if (typeof(gmCompareApp.gm[i.id]) === 'undefined') {
              gmCompareApp.gm[i.loc] = i.id;
              gmCompareApp.gm_names.push(i.loc);
            }
            if (typeof(gmCompareApp.gm_docs[i.id]) === 'undefined') {
              gmCompareApp.gm_docs[i.id] = [i.fn];
            } else {
              gmCompareApp.gm_docs[i.id].push(i.fn);
            }
          }
        });
      });
      let gmUnique = [...new Set(gmCompareApp.gm_names.sort())];
      gmUnique.forEach(function (g) {
        function makeOption(g) {
          var e = document.createElement('option');
          e.append(g);
          e.attributes["value"] = gmCompareApp.gm[g];
          return e;
        }
        document.getElementById('select-gm-1').append(makeOption(g));
        document.getElementById('select-gm-2').append(makeOption(g));
      })
      //console.log(gmCompareApp.gm);
    });
};

gmCompareApp.init = function() {
  gmCompareApp.initData();
  gmCompareApp.initDropDowns('#select-gm-1');
  gmCompareApp.initDropDowns('#select-gm-2');

  document.getElementById('btn-clipboard-copy').onclick = function(e) {
      copyElementToClipboard('compare-article');
      alert('Het artikel staat op het klembord!');
  };
};

gmCompareApp.init();
</script>
