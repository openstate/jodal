<!-- title: Articles -->
<h1>Gemeentebegroting 2023</h1>
<form>
  <select id="select-gm-1" name="gm1">
    <option value="-">-</option>
  </select>  vergelijken met
  <select id="select-gm-2" name="gm2">
    <option value="-">-</option>
  </select>  vergelijken met
</form>

<P>De gemeentebegroting van 2023 is aanstaande. Via de website van de gemeente [invulveld gemeentenaam] kunt u deze begroting inzien zodra deze is behandeld en aangenomen door de gemeenteraad. Ook al lijken de begrotingen van verschillende gemeenten veel op elkaar, iedere gemeente besteedt het totale budget op een ander manier. Dit heeft vooral te maken met de diversiteit van de omgeving en samenleving. Waar de ene gemeente meer aandacht heeft voor orde en veiligheid, reserveert een andere gemeente meer budget voor het realiseren van groen. In dit artikel kunt u de budgetten en belastingen van verschillende gemeenten met elkaar vergelijken.</P>

<H2>Hoe komt een gemeentebegroting tot stand?</H2>

<P>Een gemeentebegroting is een financiÃ«le prognose bestaande uit baten(inkomsten) en lasten(uitgaven). Het heeft nogal wat voeten in de aarde voordat deze begroting goedgekeurd wordt. De gemeentebegroting is een raming die verdeeld is onder verschillende domeinen. Officieel mag een gemeente geen winst maken waardoor de baten en lasten zo goed als gelijk moeten zijn.</O>

<P>Het college van burgemeester en wethouders start in het voorjaar met het maken van een kadernota. Ook wel de voorjaarsnota genoemd. Dit doen ze aan de hand van de jaarnota van het afgelopen jaar, de huidige financiele situatie en de door de gemeenteraad aangegeven prioriteiten. In deze conceptbegroting staat in grote lijnen vermeld wat de baten en lasten ongeveer gaan zijn voor het komende jaar. Deze nota gaat naar de gemeenteraad en vanaf dat moment kan er inhoudelijk gedebatteerd worden over het samenstellen van de begroting.</P>

<P>Het kan zijn dat er volledig nieuwe voorstellen gedaan worden en sommige onderdelen zullen behandeld worden als hamerstuk. Van de uitkomst stelt het college van B&W uiteinlijk een begroting op die in het najaar wordt behandeld. Grote veranderigen zijn dan over het algemeen niet meer mogelijk. Wel kunnen er, binnen de afgesproken kaders, kleine bijstellingen worden gedaan.</P>

<H2>Inkomen gemeente vergelijken</H2>

<p>Ongeveer 60% van het totale inkomen van de gemeente komt vanuit het Rijk. Er is een aanzienlijk verschil in het bedrag wat verschillende gemeenten ontvangen. Het aantal inwoners, jongeren, senioren en uitkeringsgerechtigden zijn onder andere belangrijke factoren voor het bepalen van dit budget. In dit artikel kunt u de begroting van het jaar 2022 van twee verschillende gemeenten met elkaar vergelijken.</p>

<table>
  <thead>
    <tr>
      <td></td>
      <td class="select-gm-1"></td>
      <td class="select-gm-2"></td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Totale inkomsten</strong></td>
      <td class="gm-1-baten-totaal" style="text-align: right;"></td>
      <td class="gm-2-baten-totaal" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Het rijk</td>
      <td class="gm-1-baten-0.7" style="text-align: right;"></td>
      <td class="gm-2-baten-0.7" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Veiligheid</td>
      <td class="gm-1-baten-2" style="text-align: right;"></td>
      <td class="gm-2-baten-2" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Verkeer, vervoer en waterstaat</td>
      <td class="gm-1-baten-3" style="text-align: right;"></td>
      <td class="gm-2-baten-3" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Economie</td>
      <td class="gm-1-baten-4" style="text-align: right;"></td>
      <td class="gm-2-baten-4" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Onderwijs</td>
      <td class="gm-1-baten-5" style="text-align: right;"></td>
      <td class="gm-2-baten-5" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Volksgezondheid en milieu</td>
      <td class="gm-1-baten-8" style="text-align: right;"></td>
      <td class="gm-2-baten-8" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Sport, cultuur en recreatie</td>
      <td class="gm-1-baten-6" style="text-align: right;"></td>
      <td class="gm-2-baten-6" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Sociaal domein</td>
      <td class="gm-1-baten-7" style="text-align: right;"></td>
      <td class="gm-2-baten-7" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Bestuur en ondersteuning</td>
      <td class="gm-1-baten-1" style="text-align: right;"></td>
      <td class="gm-2-baten-1" style="text-align: right;"></td>
    </tr>
    <tr>
      <td>Ruimte</td>
      <td class="gm-1-baten-9" style="text-align: right;"></td>
      <td class="gm-2-baten-9" style="text-align: right;"></td>
    </tr>
  </tbody>
</table>
<script type="text/javascript">
console.log('articles test!');

var gmCompareApp = window.gmCompareApp || {
  gm: {},
  gm_names: [],
  gm_docs: {}
};
window.gmCompareApp = gmCompareApp;

let dutchCurrency = Intl.NumberFormat('nl-NL');
gmCompareApp.formatCurrency = function(a) {
  return "\u20AC" + ' ' + dutchCurrency.format(a);
};

gmCompareApp.fillData = function(data, year, period, direction, gm_number) {
  var baseSelector = "gm-" + gm_number + '-' + direction +'-';
  data.forEach(function (p) {
    if ((p['jaar'] == year) && (p['periode'] == period) && (p['soort'] == direction)) {
      var elems = document.getElementsByClassName(baseSelector + p['code']);
      for (let i = 0; i < elems.length; i++) {
        elems[i].textContent = gmCompareApp.formatCurrency(p['bedrag']);
      }
    }
  });
};

gmCompareApp.getData = function(fn) {
  fetch('/2022-articles/' + fn).
    then((response) => response.json())
    .then(function (data) {
        console.log('Got data for ' + fn);
        gmCompareApp.fillData(data, 2022, 0, 'baten', 1);
    });
};

gmCompareApp.handleDropDown = function(e) {
  var selectedGm = e.target.options[e.target.selectedIndex].value;
  if (selectedGm != '-') {
    var selectedId = gmCompareApp.gm[selectedGm];
    console.log('Selection was changed!: ' + selectedGm);
    console.log("Should download these now:");
    console.log(gmCompareApp.gm_docs[selectedId]);
    gmCompareApp.gm_docs[selectedId].forEach(function (d) {
      gmCompareApp.getData(d);
    });
  } else {
    console.log('empty selection, should empty i guess');
  }
};

gmCompareApp.initDropDowns = function(q) {
  const selectElement = document.querySelector(q);

  selectElement.addEventListener('change', (event) => {
    gmCompareApp.handleDropDown(event);
  });
};

gmCompareApp.initData = function() {
  fetch('/2022-articles/details.json')
    .then((response) => response.json())
    .then(function(data) {
      //console.log(data);
      data.forEach(function (k) {
        k.forEach(function (i) {
          if ((i.id !== null) && i.id.startsWith("GM")) {
            if (typeof(gmCompareApp.gm[i.id]) === 'undefined') {
              gmCompareApp.gm[i.loc] = i.id;
              gmCompareApp.gm_names.push(i.loc);
            }
            if (typeof(gmCompareApp.gm_docs[i.id]) === 'undefined') {
              gmCompareApp.gm_docs[i.id] = [i.fn];
            } else {
              gmCompareApp.gm_docs[i.id].push(i.fn);
            }
          }
        });
      });
      let gmUnique = [...new Set(gmCompareApp.gm_names.sort())];
      gmUnique.forEach(function (g) {
        function makeOption(g) {
          var e = document.createElement('option');
          e.append(g);
          e.attributes["value"] = gmCompareApp.gm[g];
          return e;
        }
        document.getElementById('select-gm-1').append(makeOption(g));
        document.getElementById('select-gm-2').append(makeOption(g));
      })
      //console.log(gmCompareApp.gm);
    });
};

gmCompareApp.init = function() {
  gmCompareApp.initData();
  gmCompareApp.initDropDowns('#select-gm-1');
  gmCompareApp.initDropDowns('#select-gm-2');
};

gmCompareApp.init();
</script>
