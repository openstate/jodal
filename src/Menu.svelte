<svelte:head>
  <title>Jodal</title>
</svelte:head>

<section>
      <TopAppBar variant="static" {prominent} {dense} color={secondaryColor ? 'secondary' : 'primary'}>
        <Row>
          <Section>
            <IconButton class="material-icons"  on:click={() => drawerOpen.update(n => !n)}>menu</IconButton>
            <Title>Jodal</Title>
          </Section>
          <Section align="end" toolbar>
          {#if $identity}
            <IconButton class="material-icons" aria-label="Add a column" title="Kolom toevoegen" on:click={() => startAddColumn()}>add</IconButton>
            <IconButton class="material-icons" aria-label="Account" title="{$identity.email}">account_circle</IconButton>
            <IconButton class="material-icons" aria-label="Logout" href="http://api.jodal.nl/users/simple/logout" title="Uitloggen">logout</IconButton>
          {:else}
            <IconButton class="material-icons" aria-label="Login" href="http://api.jodal.nl/users/simple/login" title="Inloggen">login</IconButton>
          {/if}
          </Section>
        </Row>
      </TopAppBar>
</section>

<AddColumn/>
<script>
  import { drawerOpen,fetchingEnabled, identity } from './stores.js';
  import AddColumn, { startAddColumn } from './AddColumn.svelte';
  import TopAppBar, {Row, Section, Title} from '@smui/top-app-bar';
  import IconButton from '@smui/icon-button';
  import Checkbox from '@smui/checkbox';
  import FormField from '@smui/form-field';

  let prominent = false;
  let dense = false;
  let secondaryColor = false;
  var iconName = "pause";

  function doPause() {
    console.log('FIXME: disabling fetching for now!!!!!');
    fetchingEnabled.set(!$fetchingEnabled);
    if ($fetchingEnabled) {
      iconName = "pause";
    } else {
      iconName = "play_arrow";
    }
  }
</script>

<style>
  .top-app-bar-container, .top-app-bar-iframe {
    max-width: 480px;
    min-width: 480px;
    height: 320px;
    border: 1px solid rgba(0,0,0,.1);
    margin: 0 18px 18px 0;
  }

  .top-app-bar-container {
    overflow: auto;
    display: inline-block;
  }

  .flexy {
    display: flex;
    flex-wrap: wrap;
  }

  .flexor {
    display: inline-flex;
    flex-direction: column;
  }

  .flexor-content {
    flex-basis: 0;
    height: 0;
    flex-grow: 1;
    overflow: auto;
  }
</style>
